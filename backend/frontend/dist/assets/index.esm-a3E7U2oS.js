import{r as n,R as M}from"./index-MjoGkJKq.js";function V(o={}){const{nonce:t,onScriptLoadSuccess:l,onScriptLoadError:r}=o,[a,c]=n.useState(!1),d=n.useRef(l);d.current=l;const s=n.useRef(r);return s.current=r,n.useEffect(()=>{const i=document.createElement("script");return i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.nonce=t,i.onload=()=>{var e;c(!0),(e=d.current)===null||e===void 0||e.call(d)},i.onerror=()=>{var e;c(!1),(e=s.current)===null||e===void 0||e.call(s)},document.body.appendChild(i),()=>{document.body.removeChild(i)}},[t]),a}const j=n.createContext(null);function K({clientId:o,nonce:t,onScriptLoadSuccess:l,onScriptLoadError:r,children:a}){const c=V({nonce:t,onScriptLoadSuccess:l,onScriptLoadError:r}),d=n.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:c}),[o,c]);return M.createElement(j.Provider,{value:d},a)}function q(){const o=n.useContext(j);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function D(o){var t;return(t=o==null?void 0:o.clientId)!==null&&t!==void 0?t:o==null?void 0:o.client_id}const F={large:40,medium:32,small:20};function N({onSuccess:o,onError:t,useOneTap:l,promptMomentNotification:r,type:a="standard",theme:c="outline",size:d="large",text:s,shape:i,logo_alignment:e,width:x,locale:C,click_listener:k,containerProps:w,...B}){const p=n.useRef(null),{clientId:A,scriptLoadedSuccessfully:I}=q(),R=n.useRef(o);R.current=o;const g=n.useRef(t);g.current=t;const O=n.useRef(r);return O.current=r,n.useEffect(()=>{var _,m,S,h,L,y,E,b,G;if(I)return(S=(m=(_=window==null?void 0:window.google)===null||_===void 0?void 0:_.accounts)===null||m===void 0?void 0:m.id)===null||S===void 0||S.initialize({client_id:A,callback:u=>{var v;if(!(u!=null&&u.credential))return(v=g.current)===null||v===void 0?void 0:v.call(g);const{credential:f,select_by:H}=u;R.current({credential:f,clientId:D(u),select_by:H})},...B}),(y=(L=(h=window==null?void 0:window.google)===null||h===void 0?void 0:h.accounts)===null||L===void 0?void 0:L.id)===null||y===void 0||y.renderButton(p.current,{type:a,theme:c,size:d,text:s,shape:i,logo_alignment:e,width:x,locale:C,click_listener:k}),l&&((G=(b=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||b===void 0?void 0:b.id)===null||G===void 0||G.prompt(O.current)),()=>{var u,v,f;l&&((f=(v=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||v===void 0?void 0:v.id)===null||f===void 0||f.cancel())}},[A,I,l,a,c,d,s,i,e,x,C]),M.createElement("div",{...w,ref:p,style:{height:F[d],...w==null?void 0:w.style}})}export{K as G,N as a};
