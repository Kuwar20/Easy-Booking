import{c as w,a as k,b as C,f as I,j as e,R as D,r as g,m as S,k as A,q as F}from"./index-MjoGkJKq.js";import{A as O}from"./index.esm-Byi_Ytq7.js";import{a as f,e as b}from"./index-5JCR8a3y.js";import{e as j}from"./index.esm-vGOlp4xa.js";import{u as L}from"./index.esm-JOZrsEaS.js";import"./iconBase-zMJGrWL1.js";const R=({hotelId:l,pricePerNight:s})=>{const r=w(),{isLoggedIn:n}=k(),a=C(),h=I(),{watch:o,register:c,handleSubmit:d,setValue:i,formState:{errors:p}}=L({defaultValues:{checkIn:r.checkIn,checkOut:f(r.checkIn,1),adultCount:r.adultCount,childCount:r.childCount}}),u=o("checkIn"),x=o("checkOut"),N=new Date,m=new Date;m.setFullYear(m.getFullYear()+1);const y=t=>{r.saveSearchValues("",t.checkIn,t.checkOut,t.adultCount,t.childCount),a("/sign-in",{state:{from:h}})},v=t=>{r.saveSearchValues("",t.checkIn,t.checkOut,t.adultCount,t.childCount),a(`/hotel/${l}/booking`)};return e.jsxs("div",{className:"flex flex-col p-4 bg-blue-200 gap-4  dark:bg-gray-800 transition-colors duration-300 text-gray-900 dark:text-blue-500",children:[e.jsxs("h2",{className:"text-md font-bold",children:["Price Per Night: â‚¹",s]}),e.jsx("form",{onSubmit:d(n?v:y),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:"bold"},children:"Check-in:"}),e.jsx(b,{required:!0,selected:u,onChange:t=>{i("checkIn",t),i("checkOut",f(t,1))},selectsStart:!0,startDate:u,endDate:x,minDate:N,maxDate:m,placeholderText:"Check-in Date",className:"min-w-full bg-white p-2 focus:outline-none",wrapperClassName:"min-w-full",dateFormat:"dd/MM/yyyy"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:"bold"},children:"Check-out:"}),e.jsx(b,{required:!0,selected:x,onChange:t=>i("checkOut",t),selectsStart:!0,startDate:u,endDate:x,minDate:f(u,1),maxDate:m,placeholderText:"Check-out Date",className:"min-w-full bg-white p-2 focus:outline-none",wrapperClassName:"min-w-full",dateFormat:"dd/MM/yyyy"})]}),e.jsxs("div",{className:"flex bg-white px-2 py-1 gap-2",children:[e.jsxs("label",{className:"items-center flex",children:[e.jsx(j,{size:24,style:{marginRight:"10px"}}),"Adults:",e.jsx("input",{className:"w-full p-1 focus:outline-none font-bold",type:"number",min:1,max:20,...c("adultCount",{required:"This field is required",min:{value:1,message:"There must be at least one adult"},valueAsNumber:!0})})]}),e.jsxs("label",{className:"items-center flex",children:[e.jsx(j,{size:22,style:{marginRight:"10px"}}),"Children:",e.jsx("input",{className:"w-full p-1 focus:outline-none font-bold",type:"number",min:0,max:20,...c("childCount",{valueAsNumber:!0})})]}),p.adultCount&&e.jsx("span",{className:"text-red-500 font-semibold text-sm",children:p.adultCount.message})]}),n?e.jsx("button",{className:"bg-blue-600 text-white h-full p-2 font-bold hover:bg-blue-500 text-xl",children:"Book Now"}):e.jsx("button",{className:"bg-blue-600 text-white h-full p-2 font-bold hover:bg-blue-500 text-xl",children:"Sign in to Book"})]})})]})},B=D.memo(({src:l,alt:s})=>{const[r,n]=g.useState(!1),[a,h]=g.useState("");return g.useEffect(()=>{const o=document.createElement("canvas");o.width=10,o.height=10;const c=o.getContext("2d");if(c){c.filter="blur(5px)";const i=new Image;i.crossOrigin="Anonymous",i.src=l,i.onload=()=>{c.drawImage(i,0,0,10,10),h(o.toDataURL())}}const d=new Image;d.src=l,d.onload=()=>n(!0)},[l]),e.jsxs("div",{className:"h-64 rounded-lg overflow-hidden shadow-md relative",children:[a&&e.jsx("img",{src:a,alt:"",className:"absolute inset-0 w-full h-full object-cover object-center",style:{filter:"blur(20px)",transform:"scale(1.2)"}}),e.jsx("img",{src:l,alt:s,className:`absolute inset-0 w-full h-full object-cover object-center transition-opacity duration-500 ease-in-out ${r?"opacity-100":"opacity-0"} transform hover:scale-105 transition-transform duration-300`,loading:"lazy"})]})}),V=()=>{const{hotelId:l}=S(),{data:s,isLoading:r}=A(["fetchHotelById",l],()=>F(l||""),{enabled:!!l});return r||!s?e.jsx("div",{className:"text-center py-10",children:"Loading..."}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden dark:bg-gray-800 transition-colors duration-300 text-gray-900 dark:text-white",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.name}),e.jsx("span",{className:"flex",children:Array.from({length:s.starRating}).map((n,a)=>e.jsx(O,{className:"text-yellow-400 w-6 h-6"},a))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.imageUrls.map((n,a)=>e.jsx(B,{src:n,alt:`${s.name} - Image ${a+1}`},a))}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Amenities"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:s.facilities.map((n,a)=>e.jsx("div",{className:"bg-gray-100 rounded-lg p-3 text-center text-sm font-medium text-gray-700",children:n},a))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Description"}),e.jsx("p",{className:"whitespace-pre-line",children:s.description})]}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg shadow dark:bg-gray-800 transition-colors duration-300 text-gray-900 dark:text-black border",children:e.jsx(R,{pricePerNight:s.pricePerNight,hotelId:s._id})})]})]})})})};export{V as default};
